---
import MainLayout from './MainLayout.astro';
import Header from '../components/astro/Header.astro';
import Sidebar from '../components/astro/Sidebar.astro';
import { CommandPalette } from '../components/islands/CommandPalette';
import { PWAInstallPrompt } from '../components/islands/PWAInstallPrompt';

export interface Props {
  title?: string;
  description?: string;
  activeNav?: string;
}

const { title, description, activeNav = 'dashboard' } = Astro.props;
---

<MainLayout title={title} description={description}>
  <div class="flex h-screen overflow-hidden bg-background-light dark:bg-background-dark">
    <!-- Sidebar -->
    <Sidebar activeNav={activeNav} />
    
    <!-- Main Content Area -->
    <div class="flex-1 flex flex-col overflow-hidden">
      <!-- Header -->
      <Header />
      
      <!-- Page Content -->
      <main class="flex-1 overflow-y-auto p-4 md:p-6 lg:p-8">
        <slot />
      </main>
    </div>
  </div>
  
  <!-- Command Palette (available globally with Cmd/Ctrl+K) -->
  <CommandPalette client:only="react" />
  
  <!-- PWA Install Prompt -->
  <PWAInstallPrompt client:only="react" />
</MainLayout>
